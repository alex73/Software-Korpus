<?xml version="1.0" encoding="utf-8" ?>
<project name="Korpus-WebDataPrepare" default="all" basedir=".">

	<target name="clean">
		<delete dir="build" failonerror="false" />
	</target>

	<target name="build">
		<mkdir dir="build/classes" />
		<javac srcdir="src" encoding="utf-8" destdir="build/classes" nowarn="true" debug="true" debuglevel="lines,vars,source">
			<classpath>
				<fileset dir="lib" includes="**/*.jar" />
				<pathelement location="../Web/build/classes" />
				<fileset dir="../Common/lib/" includes="**/*.jar" />
				<fileset dir="../Common/build/" includes="Korpus-Common.jar" />
			</classpath>
		</javac>
		<copy todir="build/classes">
			<fileset dir="src" />
		</copy>
		<java failonerror="true" fork="true" classname="org.alex73.korpus.compiler.PrepareCache">
			<classpath>
				<pathelement location="build/classes"/>
				<pathelement location="../Web/build/classes" />
				<fileset dir="../Common/lib/" includes="**/*.jar" />
				<fileset dir="../Common/build/" includes="Korpus-Common.jar" />
				<fileset dir="../Web/war/WEB-INF/lib/" includes="**/*.jar" />
			</classpath>
			<jvmarg value="-Xmx4096M"/>
		</java>
	</target>

	<target name="all" depends="clean,build"/>
</project>
